{"ast":null,"code":"/**\n * @module ol/net\n */\nimport { getUid } from './util.js';\n/**\n * Simple JSONP helper. Supports error callbacks and a custom callback param.\n * The error callback will be called when no JSONP is executed after 10 seconds.\n *\n * @param {string} url Request url. A 'callback' query parameter will be\n *     appended.\n * @param {Function} callback Callback on success.\n * @param {Function} [errback] Callback on error.\n * @param {string} [callbackParam] Custom query parameter for the JSONP\n *     callback. Default is 'callback'.\n */\n\nexport function jsonp(url, callback, errback, callbackParam) {\n  const script = document.createElement('script');\n  const key = 'olc_' + getUid(callback);\n\n  function cleanup() {\n    delete window[key];\n    script.parentNode.removeChild(script);\n  }\n\n  script.async = true;\n  script.src = url + (url.includes('?') ? '&' : '?') + (callbackParam || 'callback') + '=' + key;\n  const timer = setTimeout(function () {\n    cleanup();\n\n    if (errback) {\n      errback();\n    }\n  }, 10000);\n\n  window[key] = function (data) {\n    clearTimeout(timer);\n    cleanup();\n    callback(data);\n  };\n\n  document.head.appendChild(script);\n}\nexport class ResponseError extends Error {\n  /**\n   * @param {XMLHttpRequest} response The XHR object.\n   */\n  constructor(response) {\n    const message = 'Unexpected response status: ' + response.status;\n    super(message);\n    /**\n     * @type {string}\n     */\n\n    this.name = 'ResponseError';\n    /**\n     * @type {XMLHttpRequest}\n     */\n\n    this.response = response;\n  }\n\n}\nexport class ClientError extends Error {\n  /**\n   * @param {XMLHttpRequest} client The XHR object.\n   */\n  constructor(client) {\n    super('Failed to issue request');\n    /**\n     * @type {string}\n     */\n\n    this.name = 'ClientError';\n    /**\n     * @type {XMLHttpRequest}\n     */\n\n    this.client = client;\n  }\n\n}\n/**\n * @param {string} url The URL.\n * @return {Promise<Object>} A promise that resolves to the JSON response.\n */\n\nexport function getJSON(url) {\n  return new Promise(function (resolve, reject) {\n    /**\n     * @param {ProgressEvent<XMLHttpRequest>} event The load event.\n     */\n    function onLoad(event) {\n      const client = event.target; // status will be 0 for file:// urls\n\n      if (!client.status || client.status >= 200 && client.status < 300) {\n        let data;\n\n        try {\n          data = JSON.parse(client.responseText);\n        } catch (err) {\n          const message = 'Error parsing response text as JSON: ' + err.message;\n          reject(new Error(message));\n          return;\n        }\n\n        resolve(data);\n        return;\n      }\n\n      reject(new ResponseError(client));\n    }\n    /**\n     * @param {ProgressEvent<XMLHttpRequest>} event The error event.\n     */\n\n\n    function onError(event) {\n      reject(new ClientError(event.target));\n    }\n\n    const client = new XMLHttpRequest();\n    client.addEventListener('load', onLoad);\n    client.addEventListener('error', onError);\n    client.open('GET', url);\n    client.setRequestHeader('Accept', 'application/json');\n    client.send();\n  });\n}\n/**\n * @param {string} base The base URL.\n * @param {string} url The potentially relative URL.\n * @return {string} The full URL.\n */\n\nexport function resolveUrl(base, url) {\n  if (url.includes('://')) {\n    return url;\n  }\n\n  return new URL(url, base).href;\n}\nlet originalXHR;\nexport function overrideXHR(xhr) {\n  if (typeof XMLHttpRequest !== 'undefined') {\n    originalXHR = XMLHttpRequest;\n  }\n\n  global.XMLHttpRequest = xhr;\n}\nexport function restoreXHR() {\n  global.XMLHttpRequest = originalXHR;\n}","map":{"version":3,"names":["getUid","jsonp","url","callback","errback","callbackParam","script","document","createElement","key","cleanup","window","parentNode","removeChild","async","src","includes","timer","setTimeout","data","clearTimeout","head","appendChild","ResponseError","Error","constructor","response","message","status","name","ClientError","client","getJSON","Promise","resolve","reject","onLoad","event","target","JSON","parse","responseText","err","onError","XMLHttpRequest","addEventListener","open","setRequestHeader","send","resolveUrl","base","URL","href","originalXHR","overrideXHR","xhr","global","restoreXHR"],"sources":["C:/Users/81806/Documents/work/GIS_APP/gis_app1/node_modules/ol/net.js"],"sourcesContent":["/**\n * @module ol/net\n */\nimport {getUid} from './util.js';\n\n/**\n * Simple JSONP helper. Supports error callbacks and a custom callback param.\n * The error callback will be called when no JSONP is executed after 10 seconds.\n *\n * @param {string} url Request url. A 'callback' query parameter will be\n *     appended.\n * @param {Function} callback Callback on success.\n * @param {Function} [errback] Callback on error.\n * @param {string} [callbackParam] Custom query parameter for the JSONP\n *     callback. Default is 'callback'.\n */\nexport function jsonp(url, callback, errback, callbackParam) {\n  const script = document.createElement('script');\n  const key = 'olc_' + getUid(callback);\n  function cleanup() {\n    delete window[key];\n    script.parentNode.removeChild(script);\n  }\n  script.async = true;\n  script.src =\n    url +\n    (url.includes('?') ? '&' : '?') +\n    (callbackParam || 'callback') +\n    '=' +\n    key;\n  const timer = setTimeout(function () {\n    cleanup();\n    if (errback) {\n      errback();\n    }\n  }, 10000);\n  window[key] = function (data) {\n    clearTimeout(timer);\n    cleanup();\n    callback(data);\n  };\n  document.head.appendChild(script);\n}\n\nexport class ResponseError extends Error {\n  /**\n   * @param {XMLHttpRequest} response The XHR object.\n   */\n  constructor(response) {\n    const message = 'Unexpected response status: ' + response.status;\n    super(message);\n\n    /**\n     * @type {string}\n     */\n    this.name = 'ResponseError';\n\n    /**\n     * @type {XMLHttpRequest}\n     */\n    this.response = response;\n  }\n}\n\nexport class ClientError extends Error {\n  /**\n   * @param {XMLHttpRequest} client The XHR object.\n   */\n  constructor(client) {\n    super('Failed to issue request');\n\n    /**\n     * @type {string}\n     */\n    this.name = 'ClientError';\n\n    /**\n     * @type {XMLHttpRequest}\n     */\n    this.client = client;\n  }\n}\n\n/**\n * @param {string} url The URL.\n * @return {Promise<Object>} A promise that resolves to the JSON response.\n */\nexport function getJSON(url) {\n  return new Promise(function (resolve, reject) {\n    /**\n     * @param {ProgressEvent<XMLHttpRequest>} event The load event.\n     */\n    function onLoad(event) {\n      const client = event.target;\n      // status will be 0 for file:// urls\n      if (!client.status || (client.status >= 200 && client.status < 300)) {\n        let data;\n        try {\n          data = JSON.parse(client.responseText);\n        } catch (err) {\n          const message = 'Error parsing response text as JSON: ' + err.message;\n          reject(new Error(message));\n          return;\n        }\n        resolve(data);\n        return;\n      }\n\n      reject(new ResponseError(client));\n    }\n\n    /**\n     * @param {ProgressEvent<XMLHttpRequest>} event The error event.\n     */\n    function onError(event) {\n      reject(new ClientError(event.target));\n    }\n\n    const client = new XMLHttpRequest();\n    client.addEventListener('load', onLoad);\n    client.addEventListener('error', onError);\n    client.open('GET', url);\n    client.setRequestHeader('Accept', 'application/json');\n    client.send();\n  });\n}\n\n/**\n * @param {string} base The base URL.\n * @param {string} url The potentially relative URL.\n * @return {string} The full URL.\n */\nexport function resolveUrl(base, url) {\n  if (url.includes('://')) {\n    return url;\n  }\n  return new URL(url, base).href;\n}\n\nlet originalXHR;\nexport function overrideXHR(xhr) {\n  if (typeof XMLHttpRequest !== 'undefined') {\n    originalXHR = XMLHttpRequest;\n  }\n  global.XMLHttpRequest = xhr;\n}\n\nexport function restoreXHR() {\n  global.XMLHttpRequest = originalXHR;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}