{"ast":null,"code":"/**\n * @module ol/render/canvas/LineStringBuilder\n */\nimport CanvasBuilder from './Builder.js';\nimport CanvasInstruction, { beginPathInstruction, strokeInstruction } from './Instruction.js';\nimport { defaultLineDash, defaultLineDashOffset } from '../canvas.js';\n\nclass CanvasLineStringBuilder extends CanvasBuilder {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   */\n  constructor(tolerance, maxExtent, resolution, pixelRatio) {\n    super(tolerance, maxExtent, resolution, pixelRatio);\n  }\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @private\n   * @return {number} end.\n   */\n\n\n  drawFlatCoordinates_(flatCoordinates, offset, end, stride) {\n    const myBegin = this.coordinates.length;\n    const myEnd = this.appendFlatLineCoordinates(flatCoordinates, offset, end, stride, false, false);\n    const moveToLineToInstruction = [CanvasInstruction.MOVE_TO_LINE_TO, myBegin, myEnd];\n    this.instructions.push(moveToLineToInstruction);\n    this.hitDetectionInstructions.push(moveToLineToInstruction);\n    return end;\n  }\n  /**\n   * @param {import(\"../../geom/LineString.js\").default|import(\"../Feature.js\").default} lineStringGeometry Line string geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  drawLineString(lineStringGeometry, feature) {\n    const state = this.state;\n    const strokeStyle = state.strokeStyle;\n    const lineWidth = state.lineWidth;\n\n    if (strokeStyle === undefined || lineWidth === undefined) {\n      return;\n    }\n\n    this.updateStrokeStyle(state, this.applyStroke);\n    this.beginGeometry(lineStringGeometry, feature);\n    this.hitDetectionInstructions.push([CanvasInstruction.SET_STROKE_STYLE, state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin, state.miterLimit, defaultLineDash, defaultLineDashOffset], beginPathInstruction);\n    const flatCoordinates = lineStringGeometry.getFlatCoordinates();\n    const stride = lineStringGeometry.getStride();\n    this.drawFlatCoordinates_(flatCoordinates, 0, flatCoordinates.length, stride);\n    this.hitDetectionInstructions.push(strokeInstruction);\n    this.endGeometry(feature);\n  }\n  /**\n   * @param {import(\"../../geom/MultiLineString.js\").default|import(\"../Feature.js\").default} multiLineStringGeometry MultiLineString geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  drawMultiLineString(multiLineStringGeometry, feature) {\n    const state = this.state;\n    const strokeStyle = state.strokeStyle;\n    const lineWidth = state.lineWidth;\n\n    if (strokeStyle === undefined || lineWidth === undefined) {\n      return;\n    }\n\n    this.updateStrokeStyle(state, this.applyStroke);\n    this.beginGeometry(multiLineStringGeometry, feature);\n    this.hitDetectionInstructions.push([CanvasInstruction.SET_STROKE_STYLE, state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin, state.miterLimit, state.lineDash, state.lineDashOffset], beginPathInstruction);\n    const ends = multiLineStringGeometry.getEnds();\n    const flatCoordinates = multiLineStringGeometry.getFlatCoordinates();\n    const stride = multiLineStringGeometry.getStride();\n    let offset = 0;\n\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      offset = this.drawFlatCoordinates_(flatCoordinates, offset,\n      /** @type {number} */\n      ends[i], stride);\n    }\n\n    this.hitDetectionInstructions.push(strokeInstruction);\n    this.endGeometry(feature);\n  }\n  /**\n   * @return {import(\"../canvas.js\").SerializableInstructions} the serializable instructions.\n   */\n\n\n  finish() {\n    const state = this.state;\n\n    if (state.lastStroke != undefined && state.lastStroke != this.coordinates.length) {\n      this.instructions.push(strokeInstruction);\n    }\n\n    this.reverseHitDetectionInstructions();\n    this.state = null;\n    return super.finish();\n  }\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   */\n\n\n  applyStroke(state) {\n    if (state.lastStroke != undefined && state.lastStroke != this.coordinates.length) {\n      this.instructions.push(strokeInstruction);\n      state.lastStroke = this.coordinates.length;\n    }\n\n    state.lastStroke = 0;\n    super.applyStroke(state);\n    this.instructions.push(beginPathInstruction);\n  }\n\n}\n\nexport default CanvasLineStringBuilder;","map":{"version":3,"names":["CanvasBuilder","CanvasInstruction","beginPathInstruction","strokeInstruction","defaultLineDash","defaultLineDashOffset","CanvasLineStringBuilder","constructor","tolerance","maxExtent","resolution","pixelRatio","drawFlatCoordinates_","flatCoordinates","offset","end","stride","myBegin","coordinates","length","myEnd","appendFlatLineCoordinates","moveToLineToInstruction","MOVE_TO_LINE_TO","instructions","push","hitDetectionInstructions","drawLineString","lineStringGeometry","feature","state","strokeStyle","lineWidth","undefined","updateStrokeStyle","applyStroke","beginGeometry","SET_STROKE_STYLE","lineCap","lineJoin","miterLimit","getFlatCoordinates","getStride","endGeometry","drawMultiLineString","multiLineStringGeometry","lineDash","lineDashOffset","ends","getEnds","i","ii","finish","lastStroke","reverseHitDetectionInstructions"],"sources":["C:/Users/81806/Documents/work/GIS_APP/gis_app1/node_modules/ol/render/canvas/LineStringBuilder.js"],"sourcesContent":["/**\n * @module ol/render/canvas/LineStringBuilder\n */\nimport CanvasBuilder from './Builder.js';\nimport CanvasInstruction, {\n  beginPathInstruction,\n  strokeInstruction,\n} from './Instruction.js';\nimport {defaultLineDash, defaultLineDashOffset} from '../canvas.js';\n\nclass CanvasLineStringBuilder extends CanvasBuilder {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   */\n  constructor(tolerance, maxExtent, resolution, pixelRatio) {\n    super(tolerance, maxExtent, resolution, pixelRatio);\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @private\n   * @return {number} end.\n   */\n  drawFlatCoordinates_(flatCoordinates, offset, end, stride) {\n    const myBegin = this.coordinates.length;\n    const myEnd = this.appendFlatLineCoordinates(\n      flatCoordinates,\n      offset,\n      end,\n      stride,\n      false,\n      false\n    );\n    const moveToLineToInstruction = [\n      CanvasInstruction.MOVE_TO_LINE_TO,\n      myBegin,\n      myEnd,\n    ];\n    this.instructions.push(moveToLineToInstruction);\n    this.hitDetectionInstructions.push(moveToLineToInstruction);\n    return end;\n  }\n\n  /**\n   * @param {import(\"../../geom/LineString.js\").default|import(\"../Feature.js\").default} lineStringGeometry Line string geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n  drawLineString(lineStringGeometry, feature) {\n    const state = this.state;\n    const strokeStyle = state.strokeStyle;\n    const lineWidth = state.lineWidth;\n    if (strokeStyle === undefined || lineWidth === undefined) {\n      return;\n    }\n    this.updateStrokeStyle(state, this.applyStroke);\n    this.beginGeometry(lineStringGeometry, feature);\n    this.hitDetectionInstructions.push(\n      [\n        CanvasInstruction.SET_STROKE_STYLE,\n        state.strokeStyle,\n        state.lineWidth,\n        state.lineCap,\n        state.lineJoin,\n        state.miterLimit,\n        defaultLineDash,\n        defaultLineDashOffset,\n      ],\n      beginPathInstruction\n    );\n    const flatCoordinates = lineStringGeometry.getFlatCoordinates();\n    const stride = lineStringGeometry.getStride();\n    this.drawFlatCoordinates_(\n      flatCoordinates,\n      0,\n      flatCoordinates.length,\n      stride\n    );\n    this.hitDetectionInstructions.push(strokeInstruction);\n    this.endGeometry(feature);\n  }\n\n  /**\n   * @param {import(\"../../geom/MultiLineString.js\").default|import(\"../Feature.js\").default} multiLineStringGeometry MultiLineString geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n  drawMultiLineString(multiLineStringGeometry, feature) {\n    const state = this.state;\n    const strokeStyle = state.strokeStyle;\n    const lineWidth = state.lineWidth;\n    if (strokeStyle === undefined || lineWidth === undefined) {\n      return;\n    }\n    this.updateStrokeStyle(state, this.applyStroke);\n    this.beginGeometry(multiLineStringGeometry, feature);\n    this.hitDetectionInstructions.push(\n      [\n        CanvasInstruction.SET_STROKE_STYLE,\n        state.strokeStyle,\n        state.lineWidth,\n        state.lineCap,\n        state.lineJoin,\n        state.miterLimit,\n        state.lineDash,\n        state.lineDashOffset,\n      ],\n      beginPathInstruction\n    );\n    const ends = multiLineStringGeometry.getEnds();\n    const flatCoordinates = multiLineStringGeometry.getFlatCoordinates();\n    const stride = multiLineStringGeometry.getStride();\n    let offset = 0;\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      offset = this.drawFlatCoordinates_(\n        flatCoordinates,\n        offset,\n        /** @type {number} */ (ends[i]),\n        stride\n      );\n    }\n    this.hitDetectionInstructions.push(strokeInstruction);\n    this.endGeometry(feature);\n  }\n\n  /**\n   * @return {import(\"../canvas.js\").SerializableInstructions} the serializable instructions.\n   */\n  finish() {\n    const state = this.state;\n    if (\n      state.lastStroke != undefined &&\n      state.lastStroke != this.coordinates.length\n    ) {\n      this.instructions.push(strokeInstruction);\n    }\n    this.reverseHitDetectionInstructions();\n    this.state = null;\n    return super.finish();\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   */\n  applyStroke(state) {\n    if (\n      state.lastStroke != undefined &&\n      state.lastStroke != this.coordinates.length\n    ) {\n      this.instructions.push(strokeInstruction);\n      state.lastStroke = this.coordinates.length;\n    }\n    state.lastStroke = 0;\n    super.applyStroke(state);\n    this.instructions.push(beginPathInstruction);\n  }\n}\n\nexport default CanvasLineStringBuilder;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}