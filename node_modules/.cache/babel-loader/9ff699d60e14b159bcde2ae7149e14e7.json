{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\81806\\\\Documents\\\\work\\\\GIS_APP\\\\gis_app1\\\\src\\\\Map\\\\MapApp.js\",\n    _s = $RefreshSig$();\n\nimport \"https://unpkg.com/elm-pep@1.0.6/dist/elm-pep.js\";\nimport { React, useEffect, useState, useRef } from \"react\";\nimport Map from \"ol/Map\";\nimport View from \"ol/View\";\nimport Tile from \"ol/layer/Tile\";\nimport { Vector as VectorLayer } from \"ol/layer\";\nimport { fromLonLat } from \"ol/proj\";\nimport OSM from \"ol/source/OSM\";\nimport \"./MapApp.css\";\nimport { Vector as VectorSorsce } from \"ol/source\";\nimport Draw from \"ol/interaction/Draw\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst MapApp = () => {\n  _s();\n\n  const mapRef = useRef();\n  const [map, setMap] = useState(null);\n  const [type, setType] = useState(\"Point\");\n  const typeRef = useRef(null);\n  const raster = new Tile({\n    source: new OSM()\n  });\n  const source = new VectorSorsce({\n    wrapX: false\n  });\n  const vector = new VectorLayer({\n    source: source\n  }); // on component mount\n\n  useEffect(() => {\n    let mapObject = new Map({\n      layers: [raster, vector],\n      target: \"map\",\n      view: new View({\n        center: fromLonLat([139.767, 35.681]),\n        zoom: 8\n      })\n    });\n    mapObject.setTarget(mapRef.current);\n    setMap(mapObject);\n    console.log(mapObject);\n    console.log(mapRef);\n    addInteraction();\n    return () => mapObject.setTarget(undefined);\n  }, []);\n  let draw;\n\n  function addInteraction() {\n    if (type !== \"None\") {\n      draw = new Draw({\n        Source: source,\n        type: type\n      });\n      map.addInteraction(draw);\n    }\n  }\n\n  useEffect(() => {\n    map.removeInteraction(draw);\n    addInteraction();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"map\",\n    ref: mapRef,\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"Geometry type: \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      ref: typeRef,\n      value: type,\n      onChange: event => setType(event.target.value),\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"Point\",\n        children: \"Point\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"LineString\",\n        children: \"LineString\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"Polygon\",\n        children: \"Polygon\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"Circle\",\n        children: \"Circle\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"None\",\n        children: \"None\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: type\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}; //import './MapApp.css';\n// class MapApp extends React.Component {\n// \tconstructor(props) {\n//     super(props);\n// \t\t// Define base layer\n//   \tthis.baseLayer = new Tile({ source: new OSM() });\n//   \t// Define base view\n//     this.baseView = new View({\n//       center: fromLonLat([37.41, 8.82]),\n//       zoom: 4\n//     });\n// \t\t// Add map, base view and layer\n//     this.map = new Map({\n//       layers: [this.baseLayer],\n//       view: this.baseView\n//     });\n//   }\n// \tstatic childContextTypes = {\n//   \tmap: PropTypes.object\n//   }\n//   getChildContext() {\n//   \treturn {\n//       map: this.map\n//     }\n//   }\n//   componentDidMount() {\n//     // set map target element\n//     this.map.setTarget(this.map);\n//   }\n//   render() {\n//   \treturn (\n//     <div ref=\"map\">\n//       <DrawMap />\n//     </div>\n//     );\n//   }\n// }\n\n\n_s(MapApp, \"jAchEZasroZYGYP6edJEXroUbJw=\");\n\n_c = MapApp;\nexport default MapApp;\n\nvar _c;\n\n$RefreshReg$(_c, \"MapApp\");","map":{"version":3,"names":["React","useEffect","useState","useRef","Map","View","Tile","Vector","VectorLayer","fromLonLat","OSM","VectorSorsce","Draw","MapApp","mapRef","map","setMap","type","setType","typeRef","raster","source","wrapX","vector","mapObject","layers","target","view","center","zoom","setTarget","current","console","log","addInteraction","undefined","draw","Source","removeInteraction","event","value"],"sources":["C:/Users/81806/Documents/work/GIS_APP/gis_app1/src/Map/MapApp.js"],"sourcesContent":["import \"https://unpkg.com/elm-pep@1.0.6/dist/elm-pep.js\";\r\nimport { React, useEffect, useState, useRef } from \"react\";\r\nimport Map from \"ol/Map\";\r\nimport View from \"ol/View\";\r\nimport Tile from \"ol/layer/Tile\";\r\nimport { Vector as VectorLayer } from \"ol/layer\";\r\nimport { fromLonLat } from \"ol/proj\";\r\nimport OSM from \"ol/source/OSM\";\r\nimport \"./MapApp.css\";\r\nimport { Vector as VectorSorsce } from \"ol/source\";\r\n\r\nimport Draw from \"ol/interaction/Draw\";\r\n\r\nconst MapApp = () => {\r\n  const mapRef = useRef();\r\n\r\n  const [map, setMap] = useState(null);\r\n\r\n  const [type, setType] = useState(\"Point\");\r\n\r\n  const typeRef = useRef(null);\r\n\r\n  const raster = new Tile({\r\n    source: new OSM(),\r\n  });\r\n\r\n  const source = new VectorSorsce({ wrapX: false });\r\n\r\n  const vector = new VectorLayer({\r\n    source: source,\r\n  });\r\n\r\n  // on component mount\r\n  useEffect(() => {\r\n    let mapObject = new Map({\r\n      layers: [raster, vector],\r\n      target: \"map\",\r\n      view: new View({\r\n        center: fromLonLat([139.767, 35.681]),\r\n        zoom: 8,\r\n      }),\r\n    });\r\n    mapObject.setTarget(mapRef.current);\r\n    setMap(mapObject);\r\n    console.log(mapObject);\r\n    console.log(mapRef);\r\n\r\n    addInteraction();\r\n\r\n    return () => mapObject.setTarget(undefined);\r\n  }, []);\r\n\r\n  let draw;\r\n  function addInteraction() {\r\n    if (type !== \"None\") {\r\n      draw = new Draw({\r\n        Source: source,\r\n        type: type,\r\n      });\r\n      map.addInteraction(draw);\r\n    }\r\n  }\r\n\r\n  useEffect(() =>{\r\n    map.removeInteraction(draw);\r\n    addInteraction();\r\n  },[]);\r\n\r\n  return (\r\n    <div className={\"map\"} ref={mapRef}>\r\n      <label>Geometry type: </label>\r\n      <select\r\n        ref={typeRef}\r\n        value={type}\r\n        onChange={(event) => setType(event.target.value)}\r\n      >\r\n        <option value=\"Point\">Point</option>\r\n        <option value=\"LineString\">LineString</option>\r\n        <option value=\"Polygon\">Polygon</option>\r\n        <option value=\"Circle\">Circle</option>\r\n        <option value=\"None\">None</option>\r\n      </select>\r\n      <label>{type}</label>\r\n      {/* <DrawMap type = {type} olmap = {map} /> */}\r\n    </div>\r\n  );\r\n};\r\n\r\n//import './MapApp.css';\r\n\r\n// class MapApp extends React.Component {\r\n// \tconstructor(props) {\r\n//     super(props);\r\n\r\n// \t\t// Define base layer\r\n//   \tthis.baseLayer = new Tile({ source: new OSM() });\r\n\r\n//   \t// Define base view\r\n//     this.baseView = new View({\r\n//       center: fromLonLat([37.41, 8.82]),\r\n//       zoom: 4\r\n//     });\r\n\r\n// \t\t// Add map, base view and layer\r\n//     this.map = new Map({\r\n//       layers: [this.baseLayer],\r\n//       view: this.baseView\r\n//     });\r\n//   }\r\n\r\n// \tstatic childContextTypes = {\r\n//   \tmap: PropTypes.object\r\n//   }\r\n\r\n//   getChildContext() {\r\n//   \treturn {\r\n//       map: this.map\r\n//     }\r\n//   }\r\n\r\n//   componentDidMount() {\r\n//     // set map target element\r\n//     this.map.setTarget(this.map);\r\n//   }\r\n\r\n//   render() {\r\n//   \treturn (\r\n//     <div ref=\"map\">\r\n//       <DrawMap />\r\n//     </div>\r\n//     );\r\n//   }\r\n// }\r\n\r\nexport default MapApp;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}