{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\81806\\\\Documents\\\\work\\\\GIS_APP\\\\gis_app1\\\\src\\\\Map\\\\MapPane.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from 'react'; // OpenLayers読み込み\n\nimport Map from 'ol/Map';\nimport View from 'ol/View';\nimport TileLayer from 'ol/layer/Tile';\nimport { fromLonLat } from 'ol/proj';\nimport OlSourceOSM from \"ol/source/OSM\";\nimport Overlay from \"ol/Overlay\";\nimport ReactDOM from \"react-dom\";\nimport 'ol/ol.css';\nimport './MapPane.css'; // const MapPane = () => {\n//   const mapRef = useRef();\n//   const [map,setMap] = useState(null);\n//   // on component mount\n//     useEffect(() => {\n//        let options = {\n//          view: new View({\n//            center: fromLonLat([139.767, 35.681]),\n//            zoom: 14,\n//          }),\n//          layers: [\n//            new TileLayer({\n//             source: new OlSourceOSM(),\n//            }),\n//         ],\n//        };\n//         let mapObject = new Map(options);\n//         mapObject.setTarget(mapRef.current);\n//         setMap(mapObject);\n//         return () => mapObject.setTarget(undefined);\n//     }, []);\n//     return (\n//       <div className={'map'} ref={mapRef} />\n//     )\n// }\n//export default MapPane;\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst mapId = \"map\";\nconst layer = new TileLayer({\n  source: new OlSourceOSM()\n});\nconst map = new Map({\n  layers: [layer],\n  view: new View({\n    center: [0, 0],\n    zoom: 2\n  })\n});\nconst popup = new Overlay({\n  element: document.createElement(\"div\")\n});\nmap.addOverlay(popup);\nmap.on(\"click\", evt => {\n  const coordinate = evt.coordinate;\n  popup.setPosition(coordinate);\n});\n\nconst Popup = () => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Popup\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n\n_c = Popup;\nexport const Main = () => {\n  _s();\n\n  const popupElement = popup.getElement();\n  useEffect(() => {\n    map.setTarget(mapId);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: mapId,\n    children: popupElement && /*#__PURE__*/ReactDOM.createPortal( /*#__PURE__*/_jsxDEV(Popup, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 46\n    }, this), popupElement)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Main, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n_c2 = Main;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Popup\");\n$RefreshReg$(_c2, \"Main\");","map":{"version":3,"names":["React","useEffect","useRef","useState","Map","View","TileLayer","fromLonLat","OlSourceOSM","Overlay","ReactDOM","mapId","layer","source","map","layers","view","center","zoom","popup","element","document","createElement","addOverlay","on","evt","coordinate","setPosition","Popup","Main","popupElement","getElement","setTarget","createPortal"],"sources":["C:/Users/81806/Documents/work/GIS_APP/gis_app1/src/Map/MapPane.js"],"sourcesContent":["import React, { useEffect, useRef, useState} from 'react';\r\n// OpenLayers読み込み\r\nimport Map from 'ol/Map';\r\nimport View from 'ol/View';\r\nimport TileLayer from 'ol/layer/Tile';\r\nimport { fromLonLat } from 'ol/proj';\r\nimport OlSourceOSM from \"ol/source/OSM\";\r\nimport Overlay from \"ol/Overlay\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nimport 'ol/ol.css';\r\nimport './MapPane.css';\r\n\r\n// const MapPane = () => {\r\n//   const mapRef = useRef();\r\n\r\n//   const [map,setMap] = useState(null);\r\n\r\n//   // on component mount\r\n//     useEffect(() => {\r\n//        let options = {\r\n//          view: new View({\r\n//            center: fromLonLat([139.767, 35.681]),\r\n//            zoom: 14,\r\n//          }),\r\n//          layers: [\r\n//            new TileLayer({\r\n//             source: new OlSourceOSM(),\r\n//            }),\r\n//         ],\r\n//        };\r\n//         let mapObject = new Map(options);\r\n//         mapObject.setTarget(mapRef.current);\r\n//         setMap(mapObject);\r\n\r\n//         return () => mapObject.setTarget(undefined);\r\n//     }, []);\r\n\r\n//     return (\r\n//       <div className={'map'} ref={mapRef} />\r\n//     )\r\n\r\n\r\n// }\r\n\r\n//export default MapPane;\r\n\r\n\r\nconst mapId = \"map\";\r\n\r\nconst layer = new TileLayer({\r\n  source: new OlSourceOSM(),\r\n});\r\n\r\nconst map = new Map({\r\n  layers: [layer],\r\n  view: new View({\r\n    center: [0, 0],\r\n    zoom: 2,\r\n  }),\r\n});\r\n\r\nconst popup = new Overlay({\r\n  element: document.createElement(\"div\"),\r\n});\r\nmap.addOverlay(popup);\r\n\r\nmap.on(\"click\", (evt) => {\r\n  const coordinate = evt.coordinate;\r\n  popup.setPosition(coordinate);\r\n});\r\n\r\nconst Popup = () => {\r\n  return (\r\n    <div>Popup</div>\r\n  );\r\n};\r\n\r\nexport const Main = () => {\r\n  const popupElement = popup.getElement();\r\n\r\n  useEffect(() => {\r\n    map.setTarget(mapId);\r\n  }, []);\r\n\r\n  return (\r\n    <div id={mapId}>\r\n      {popupElement && ReactDOM.createPortal(<Popup />, popupElement)}\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,MAA3B,EAAmCC,QAAnC,QAAkD,OAAlD,C,CACA;;AACA,OAAOC,GAAP,MAAgB,QAAhB;AACA,OAAOC,IAAP,MAAiB,SAAjB;AACA,OAAOC,SAAP,MAAsB,eAAtB;AACA,SAASC,UAAT,QAA2B,SAA3B;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,OAAP,MAAoB,YAApB;AACA,OAAOC,QAAP,MAAqB,WAArB;AAEA,OAAO,WAAP;AACA,OAAO,eAAP,C,CAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAGA;AAEA;;;AAGA,MAAMC,KAAK,GAAG,KAAd;AAEA,MAAMC,KAAK,GAAG,IAAIN,SAAJ,CAAc;EAC1BO,MAAM,EAAE,IAAIL,WAAJ;AADkB,CAAd,CAAd;AAIA,MAAMM,GAAG,GAAG,IAAIV,GAAJ,CAAQ;EAClBW,MAAM,EAAE,CAACH,KAAD,CADU;EAElBI,IAAI,EAAE,IAAIX,IAAJ,CAAS;IACbY,MAAM,EAAE,CAAC,CAAD,EAAI,CAAJ,CADK;IAEbC,IAAI,EAAE;EAFO,CAAT;AAFY,CAAR,CAAZ;AAQA,MAAMC,KAAK,GAAG,IAAIV,OAAJ,CAAY;EACxBW,OAAO,EAAEC,QAAQ,CAACC,aAAT,CAAuB,KAAvB;AADe,CAAZ,CAAd;AAGAR,GAAG,CAACS,UAAJ,CAAeJ,KAAf;AAEAL,GAAG,CAACU,EAAJ,CAAO,OAAP,EAAiBC,GAAD,IAAS;EACvB,MAAMC,UAAU,GAAGD,GAAG,CAACC,UAAvB;EACAP,KAAK,CAACQ,WAAN,CAAkBD,UAAlB;AACD,CAHD;;AAKA,MAAME,KAAK,GAAG,MAAM;EAClB,oBACE;IAAA;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAGD,CAJD;;KAAMA,K;AAMN,OAAO,MAAMC,IAAI,GAAG,MAAM;EAAA;;EACxB,MAAMC,YAAY,GAAGX,KAAK,CAACY,UAAN,EAArB;EAEA9B,SAAS,CAAC,MAAM;IACda,GAAG,CAACkB,SAAJ,CAAcrB,KAAd;EACD,CAFQ,EAEN,EAFM,CAAT;EAIA,oBACE;IAAK,EAAE,EAAEA,KAAT;IAAA,UACGmB,YAAY,iBAAIpB,QAAQ,CAACuB,YAAT,eAAsB,QAAC,KAAD;MAAA;MAAA;MAAA;IAAA,QAAtB,EAAiCH,YAAjC;EADnB;IAAA;IAAA;IAAA;EAAA,QADF;AAKD,CAZM;;GAAMD,I;;MAAAA,I"},"metadata":{},"sourceType":"module"}