{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\81806\\\\Documents\\\\work\\\\GIS_APP\\\\gis_app1\\\\src\\\\Map\\\\MapApp.js\",\n    _s = $RefreshSig$();\n\n// import React, { useEffect, useRef, useState } from 'react';\n// // OpenLayers読み込み\n// import Map from 'ol/Map';\n// import View from 'ol/View';\n// import TileLayer from 'ol/layer/Tile';\n// import { fromLonLat } from 'ol/proj';\n// import OlSourceOSM from \"ol/source/OSM\";\n// import 'ol/ol.css';\n// import './MapPane.css';\nimport \"https://unpkg.com/elm-pep@1.0.6/dist/elm-pep.js\";\nimport { React, useEffect, useState, useRef } from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport Map from 'ol/Map';\nimport View from 'ol/View';\nimport Tile from 'ol/layer/Tile';\nimport { Vector as VectorLayer } from 'ol/layer';\nimport { fromLonLat } from 'ol/proj';\nimport Stroke from 'ol/style/Stroke';\nimport interaction from 'ol/interaction';\nimport Draw from 'ol/interaction/Draw';\nimport Source from 'ol/source';\nimport OSM from \"ol/source/OSM\";\nimport Style from 'ol/style/Style';\nimport Circle from 'ol/style/Circle';\nimport Fill from 'ol/style/Fill';\nimport DrawMap from \"./DrawMap\";\nimport Layer from \"ol/layer/Layer\";\nimport './MapApp.css';\nimport { Vector as VectorSorsce } from 'ol/source';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst MapApp = () => {\n  _s();\n\n  const mapRef = useRef();\n  const [map, setMap] = useState(null);\n  const [type, setType] = useState(\"Point\");\n  const typeRef = useRef(null);\n  const raster = new Tile({\n    source: new OSM()\n  });\n  const source = new VectorSorsce({\n    wrapX: false\n  });\n  const vector = new VectorLayer({\n    source: source\n  }); // on component mount\n\n  useEffect(() => {\n    let mapObject = new Map({\n      layers: [raster, vector],\n      target: \"map\",\n      view: new View({\n        center: fromLonLat([139.767, 35.681]),\n        zoom: 8\n      })\n    });\n    mapObject.setTarget(mapRef.current);\n    setMap(mapObject);\n    console.log(mapObject);\n    console.log(mapRef);\n    return () => mapObject.setTarget(undefined);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"map\",\n    ref: mapRef,\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"Geometry type: \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      ref: typeRef,\n      value: type,\n      onChange: event => setType(event.target.value),\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"Point\",\n        children: \"Point\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"LineString\",\n        children: \"LineString\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"Polygon\",\n        children: \"Polygon\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"Circle\",\n        children: \"Circle\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"None\",\n        children: \"None\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: type\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 7\n  }, this);\n}; //import './MapApp.css';\n// class MapApp extends React.Component {\n// \tconstructor(props) {\n//     super(props);\n// \t\t// Define base layer\n//   \tthis.baseLayer = new Tile({ source: new OSM() });\n//   \t// Define base view\n//     this.baseView = new View({\n//       center: fromLonLat([37.41, 8.82]),\n//       zoom: 4\n//     });\n// \t\t// Add map, base view and layer\n//     this.map = new Map({\n//       layers: [this.baseLayer],\n//       view: this.baseView\n//     });\n//   }\n// \tstatic childContextTypes = {\n//   \tmap: PropTypes.object\n//   }\n//   getChildContext() {\n//   \treturn {\n//       map: this.map\n//     }\n//   }\n//   componentDidMount() {\n//     // set map target element\n//     this.map.setTarget(this.map);\n//   }\n//   render() {\n//   \treturn (\n//     <div ref=\"map\">\n//       <DrawMap />\n//     </div>\n//     );\n//   }\n// }\n\n\n_s(MapApp, \"WwvFhZ+lYmcrx82BT15/XLhC2Pc=\");\n\n_c = MapApp;\nexport default MapApp;\n\nvar _c;\n\n$RefreshReg$(_c, \"MapApp\");","map":{"version":3,"names":["React","useEffect","useState","useRef","ReactDOM","PropTypes","Map","View","Tile","Vector","VectorLayer","fromLonLat","Stroke","interaction","Draw","Source","OSM","Style","Circle","Fill","DrawMap","Layer","VectorSorsce","MapApp","mapRef","map","setMap","type","setType","typeRef","raster","source","wrapX","vector","mapObject","layers","target","view","center","zoom","setTarget","current","console","log","undefined","event","value"],"sources":["C:/Users/81806/Documents/work/GIS_APP/gis_app1/src/Map/MapApp.js"],"sourcesContent":["// import React, { useEffect, useRef, useState } from 'react';\r\n// // OpenLayers読み込み\r\n// import Map from 'ol/Map';\r\n// import View from 'ol/View';\r\n// import TileLayer from 'ol/layer/Tile';\r\n// import { fromLonLat } from 'ol/proj';\r\n// import OlSourceOSM from \"ol/source/OSM\";\r\n\r\n// import 'ol/ol.css';\r\n// import './MapPane.css';\r\n\r\n\r\n\r\n\r\n\r\nimport \"https://unpkg.com/elm-pep@1.0.6/dist/elm-pep.js\";\r\nimport {React,useEffect,useState,useRef} from 'react';\r\nimport ReactDOM from 'react-dom'\r\nimport PropTypes from 'prop-types';\r\nimport Map from 'ol/Map';\r\nimport View from 'ol/View';\r\nimport Tile from 'ol/layer/Tile';\r\nimport {Vector as VectorLayer} from 'ol/layer';\r\nimport { fromLonLat } from 'ol/proj';\r\nimport Stroke from 'ol/style/Stroke';\r\nimport interaction from 'ol/interaction';\r\nimport Draw from 'ol/interaction/Draw';\r\nimport Source from 'ol/source';\r\nimport OSM from \"ol/source/OSM\";\r\nimport Style from 'ol/style/Style';\r\nimport Circle from 'ol/style/Circle';\r\nimport Fill from 'ol/style/Fill';\r\nimport DrawMap from \"./DrawMap\";\r\nimport Layer from \"ol/layer/Layer\";\r\nimport './MapApp.css';\r\nimport {Vector as VectorSorsce} from 'ol/source';\r\n\r\nconst MapApp = () => {\r\n  const mapRef = useRef();\r\n\r\n  const [map,setMap] = useState(null);\r\n\r\n  const [type, setType] = useState(\"Point\");\r\n\r\n  const typeRef = useRef(null);\r\n\r\n  const raster = new Tile({\r\n    source: new OSM(),\r\n  });\r\n  \r\n  const source = new VectorSorsce({wrapX: false});\r\n  \r\n  const vector = new VectorLayer({\r\n    source: source,\r\n  });\r\n\r\n  // on component mount\r\n    useEffect(() => {\r\n        let mapObject = new Map({\r\n          layers: [raster, vector],\r\n          target: \"map\",\r\n          view: new View({\r\n            center: fromLonLat([139.767, 35.681]),\r\n            zoom: 8,\r\n          }),\r\n        });\r\n        mapObject.setTarget(mapRef.current);\r\n        setMap(mapObject);\r\n        console.log(mapObject);\r\n        console.log(mapRef);\r\n\r\n        \r\n\r\n        return () => mapObject.setTarget(undefined);\r\n    }, []);\r\n\r\n    \r\n\r\n    return (\r\n      <div className={\"map\"} ref={mapRef}>\r\n        <label>Geometry type: </label>\r\n        <select\r\n          ref={typeRef}\r\n          value={type}\r\n          onChange={(event) => setType(event.target.value)}\r\n        >\r\n          <option value=\"Point\">Point</option>\r\n          <option value=\"LineString\">LineString</option>\r\n          <option value=\"Polygon\">Polygon</option>\r\n          <option value=\"Circle\">Circle</option>\r\n          <option value=\"None\">None</option>\r\n        </select>\r\n        <label>{type}</label>\r\n        {/* <DrawMap type = {type} olmap = {map} /> */}\r\n      </div>\r\n    );\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n//import './MapApp.css';\r\n\r\n// class MapApp extends React.Component {\r\n// \tconstructor(props) {\r\n//     super(props);\r\n\r\n// \t\t// Define base layer\r\n//   \tthis.baseLayer = new Tile({ source: new OSM() });\r\n    \r\n//   \t// Define base view\r\n//     this.baseView = new View({\r\n//       center: fromLonLat([37.41, 8.82]),\r\n//       zoom: 4\r\n//     });\r\n\r\n// \t\t// Add map, base view and layer\r\n//     this.map = new Map({\r\n//       layers: [this.baseLayer],\r\n//       view: this.baseView\r\n//     });\r\n//   }\r\n  \r\n// \tstatic childContextTypes = {\r\n//   \tmap: PropTypes.object\r\n//   }\r\n  \r\n//   getChildContext() {\r\n//   \treturn {\r\n//       map: this.map\r\n//     }\r\n//   }\r\n  \r\n//   componentDidMount() {\r\n//     // set map target element\r\n//     this.map.setTarget(this.map);\r\n//   }\r\n\t\r\n//   render() {\r\n//   \treturn (\r\n//     <div ref=\"map\">\r\n//       <DrawMap />\r\n//     </div>\r\n//     );\r\n//   }\r\n// }\r\n\r\n\r\nexport default MapApp;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}